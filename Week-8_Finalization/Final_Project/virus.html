<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Virus Awareness Training</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
    color: #ffffff;
    min-height: 100vh;
    line-height: 1.6;
  }
  
  header {
    position: fixed;
    top: 0; left: 0; right: 0;
    background: rgba(17, 17, 17, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 100;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  
  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .logo-icon {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  header h1 {
    font-size: 22px;
    font-weight: 700;
    background: linear-gradient(135deg, #ffffff 0%, #cccccc 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .scoreboard {
    display: flex;
    gap: 25px;
    background: rgba(255, 255, 255, 0.05);
    padding: 12px 20px;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .scoreboard div {
    text-align: center;
    min-width: 80px;
  }
  
  .score-label {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 5px;
    opacity: 0.8;
  }
  
  .score-value {
    font-size: 24px;
    font-weight: 700;
  }
  
  .protected .score-value {
    color: #4ade80;
    text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
  }
  
  .infected .score-value {
    color: #f87171;
    text-shadow: 0 0 10px rgba(248, 113, 113, 0.3);
  }
  
  main {
    padding: 100px 25px 40px;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .welcome-section {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .welcome-section h2 {
    font-size: 28px;
    margin-bottom: 15px;
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .welcome-section p {
    font-size: 16px;
    color: #cccccc;
    max-width: 600px;
    margin: 0 auto;
  }
  
  .simulation-area {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 30px;
    margin-bottom: 30px;
  }
  
  .computer-interface {
    background: #1e1e1e;
    border-radius: 12px;
    padding: 20px;
    border: 2px solid #333;
    min-height: 300px;
    position: relative;
    overflow: hidden;
  }
  
  .file-system {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }
  
  .file {
    background: #2a2a2a;
    border-radius: 8px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid #333;
    position: relative;
    overflow: hidden;
  }
  
  .file:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }
  
  .file.clean {
    border-color: #10b981;
  }
  
  .file.infected {
    border-color: #ef4444;
    animation: infectedPulse 1s infinite;
  }
  
  .file-icon {
    font-size: 32px;
    margin-bottom: 8px;
  }
  
  .file-name {
    font-size: 12px;
    color: #ccc;
    word-break: break-all;
  }
  
  .file-size {
    font-size: 10px;
    color: #888;
    margin-top: 5px;
  }
  
  .virus-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: #ef4444;
    border-radius: 50%;
    pointer-events: none;
    z-index: 10;
  }
  
  .infection-animation {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, rgba(239, 68, 68, 0.8) 0%, transparent 70%);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: infectSpread 1s ease-out;
    pointer-events: none;
    z-index: 5;
  }
  
  .virus-code {
    position: absolute;
    font-family: 'Courier New', monospace;
    font-size: 10px;
    color: #ef4444;
    background: rgba(0, 0, 0, 0.7);
    padding: 2px 4px;
    border-radius: 3px;
    pointer-events: none;
    z-index: 15;
    animation: codeFloat 3s linear;
  }
  
  .scenarios {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
    margin-top: 30px;
  }
  
  .card {
    background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 25px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    overflow: hidden;
  }
  
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, #dc2626, #b91c1c);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .card:hover:not(.disabled) {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
    border-color: rgba(220, 38, 38, 0.3);
  }
  
  .card:hover:not(.disabled)::before {
    opacity: 1;
  }
  
  .card.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
  }
  
  .card-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    font-size: 24px;
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  }
  
  .card h2 {
    font-size: 20px;
    margin-bottom: 12px;
    font-weight: 600;
  }
  
  .card p {
    font-size: 14px;
    color: #aaaaaa;
    margin-bottom: 15px;
    line-height: 1.5;
  }
  
  .card-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    background: rgba(220, 38, 38, 0.2);
    color: #dc2626;
    border: 1px solid rgba(220, 38, 38, 0.3);
  }
  
  .card .checkmark {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #10b981;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
  }
  
  /* Modal styles */
  .modal-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    padding: 20px;
  }
  
  .modal-overlay.active {
    display: flex;
    animation: fadeIn 0.3s ease;
  }
  
  .modal {
    background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    padding: 30px 35px;
    box-sizing: border-box;
    text-align: center;
    color: #eee;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
    position: relative;
    animation: slideUp 0.4s ease;
  }
  
  .modal-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(255, 255, 255, 0.1);
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.3s;
    font-weight: bold;
    font-size: 20px;
    line-height: 1;
  }
  
  .modal-close:hover {
    background: rgba(255, 255, 255, 0.2);
  }
  
  .modal h3 {
    font-size: 26px;
    margin-bottom: 20px;
    font-weight: 700;
  }
  
  .warning-modal h3 {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .success-modal h3 {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  .modal p {
    font-size: 17px;
    color: #ddd;
    margin-bottom: 25px;
    line-height: 1.5;
  }
  
  .modal-content {
    margin: 20px 0 30px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 14px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    text-align: left;
    max-height: 300px;
    overflow-y: auto;
    font-size: 15px;
    color: #ccc;
    white-space: pre-line;
  }
  
  .modal-buttons {
    display: flex;
    gap: 20px;
    justify-content: center;
  }
  
  .modal-btn {
    padding: 14px 30px;
    border: none;
    border-radius: 12px;
    font-size: 17px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 140px;
  }
  
  .btn-danger {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
  }
  
  .btn-danger:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(239, 68, 68, 0.5);
  }
  
  .btn-safe {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
  }
  
  .btn-safe:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(16, 185, 129, 0.5);
  }
  
  .link {
    color: #f87171;
    text-decoration: underline;
    cursor: pointer;
    font-weight: 600;
    transition: color 0.3s;
  }
  
  .link:hover {
    color: #ef4444;
  }
  
  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes slideUp {
    from { 
      opacity: 0;
      transform: translateY(30px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  
  @keyframes infectedPulse {
    0%, 100% { 
      box-shadow: 0 0 0 rgba(239, 68, 68, 0);
      border-color: #ef4444;
    }
    50% { 
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
      border-color: #ff6b6b;
    }
  }
  
  @keyframes infectSpread {
    0% { 
      transform: translate(-50%, -50%) scale(0);
      opacity: 1;
    }
    100% { 
      transform: translate(-50%, -50%) scale(2);
      opacity: 0;
    }
  }
  
  @keyframes codeFloat {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-100px);
    }
  }
  
  @keyframes virusMove {
    0% {
      opacity: 0;
      transform: translate(0, 0) scale(0.5);
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      opacity: 0;
      transform: translate(var(--tx), var(--ty)) scale(1);
    }
  }
  
  .pulse {
    animation: pulse 0.5s ease;
  }
  
  .scan-animation {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, #10b981, transparent);
    animation: scanLine 2s linear infinite;
  }
  
  @keyframes scanLine {
    0% { transform: translateY(0); }
    100% { transform: translateY(300px); }
  }
  
  .status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding: 10px;
    background: #333;
    border-radius: 8px;
  }
  
  .antivirus-status {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #10b981;
  }
  
  .status-indicator.off {
    background: #ef4444;
  }
  
  .action-buttons {
    display: flex;
    gap: 15px;
    margin-top: 20px;
  }
  
  .action-btn {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .btn-scan {
    background: #10b981;
    color: white;
  }
  
  .btn-scan:hover {
    background: #059669;
  }
  
  .btn-quarantine {
    background: #f59e0b;
    color: white;
  }
  
  .btn-quarantine:hover {
    background: #d97706;
  }
  
  .btn-demonstrate {
    background: #6366f1;
    color: white;
  }
  
  .btn-demonstrate:hover {
    background: #4f46e5;
  }
  
  .visualization-controls {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    justify-content: center;
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <div class="logo-icon">🦠</div>
    <h1>Virus Awareness</h1>
  </div>
  <div class="scoreboard">
    <div class="protected">
      <div class="score-label">Protected</div>
      <div class="score-value" id="protected-score">0</div>
    </div>
    <div class="infected">
      <div class="score-label">Infected</div>
      <div class="score-value" id="infected-score">0</div>
    </div>
  </div>
</header>

<main>
  <div class="welcome-section">
    <h2>Virus Infection Simulation</h2>
    <p>Watch how viruses attach to files and spread through systems. See the infection process in action!</p>
  </div>
  
  <div class="simulation-area">
    <div class="status-bar">
      <div class="antivirus-status">
        <div class="status-indicator" id="av-status"></div>
        <span>Antivirus: <span id="av-status-text">Active</span></span>
      </div>
      <div>Files: <span id="file-count">8</span> | Infected: <span id="infected-count">0</span></div>
    </div>
    
    <div class="computer-interface" id="computer-interface">
      <div class="scan-animation" id="scan-animation" style="display: none;"></div>
      <h3 style="margin-bottom: 20px; color: #ccc;">File System - Click files to open them</h3>
      <div class="file-system" id="file-system">
        <!-- Files will be generated by JavaScript -->
      </div>
      
      <div class="action-buttons">
        <button class="action-btn btn-scan" onclick="runAntivirusScan()">🛡️ Run Antivirus Scan</button>
        <button class="action-btn btn-quarantine" onclick="quarantineInfected()">🚫 Quarantine Infected</button>
        <button class="action-btn btn-demonstrate" onclick="demonstrateVirusSpread()">👁️ Show Virus Spread</button>
      </div>
    </div>
  </div>
  
  <div class="scenarios" id="scenarios-container">
    <!-- Scenario cards inserted by JS -->
  </div>
</main>

<!-- Warning Modal -->
<div class="modal-overlay" id="warning-modal">
  <div class="modal warning-modal">
    <div class="modal-close" onclick="closeWarningModal()">×</div>
    <h3>⚠️ Virus Detected!</h3>
    <p id="warning-message"></p>
    <div class="modal-content" id="warning-explanation"></div>
    <div class="modal-buttons">
      <button class="modal-btn btn-safe" onclick="closeWarningModal()">I Understand</button>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div class="modal-overlay" id="success-modal">
  <div class="modal success-modal">
    <div class="modal-close" onclick="closeSuccessModal()">×</div>
    <h3>✅ Success!</h3>
    <p id="success-message"></p>
    <div class="modal-content" id="success-explanation"></div>
    <div class="modal-buttons">
      <button class="modal-btn btn-safe" onclick="closeSuccessModal()">Continue</button>
    </div>
  </div>
</div>

<script>
  // File system simulation
  const files = [
    { id: 1, name: 'report.docx', type: 'document', size: '2.3MB', icon: '📄', infected: false },
    { id: 2, name: 'budget.xlsx', type: 'spreadsheet', size: '1.8MB', icon: '📊', infected: false },
    { id: 3, name: 'presentation.pptx', type: 'presentation', size: '4.1MB', icon: '📽️', infected: false },
    { id: 4, name: 'photo.jpg', type: 'image', size: '3.5MB', icon: '🖼️', infected: false },
    { id: 5, name: 'music.mp3', type: 'audio', size: '5.2MB', icon: '🎵', infected: false },
    { id: 6, name: 'video.mp4', type: 'video', size: '15.7MB', icon: '🎬', infected: false },
    { id: 7, name: 'archive.zip', type: 'archive', size: '8.9MB', icon: '📦', infected: false },
    { id: 8, name: 'script.js', type: 'code', size: '0.2MB', icon: '💻', infected: false }
  ];

  // Scenarios data
  const scenarios = [
    {
      id: 'email-attachment',
      title: 'Email Attachment Virus',
      description: 'You received an email with an attachment from an unknown sender.',
      explanation: `📧 EMAIL ATTACHMENT VIRUSES

- Viruses often spread through email attachments
- Common attachment types: .exe, .zip, .doc with macros
- Attackers use social engineering to trick users

🔍 HOW IT SPREADS:
1. User opens infected attachment
2. Virus executes and installs itself
3. Spreads to other files on the system
4. Sends itself to contacts via email

🛡️ PROTECTION:
- Don't open attachments from unknown senders
- Scan attachments with antivirus
- Enable email filtering
- Keep software updated`
    },
    {
      id: 'download-virus',
      title: 'Infected Software Download',
      description: 'You downloaded software from an unofficial website.',
      explanation: `💻 INFECTED SOFTWARE DOWNLOADS

- Cracked/pirated software often contains viruses
- Fake download buttons on websites
- Bundled malware with free software

🦠 INFECTION PROCESS:
1. User downloads and installs software
2. Hidden virus activates during installation
3. Modifies system files and registry
4. Spreads to other executable files

✅ SAFE PRACTICES:
- Download from official sources only
- Verify checksums and signatures
- Use antivirus to scan downloads
- Avoid pirated software`
    },
    {
      id: 'usb-virus',
      title: 'USB Drive Infection',
      description: 'You inserted a USB drive that contains infected files.',
      explanation: `💾 USB DRIVE VIRUSES

- Autorun viruses activate when drive is inserted
- Infected files spread when accessed
- Can infect entire networks

📈 SPREAD MECHANISM:
1. Insert infected USB drive
2. Autorun executes virus automatically
3. Virus copies itself to system
4. Infects other removable drives

🔐 PREVENTION:
- Disable autorun feature
- Scan USB drives before opening
- Use write-protected drives
- Don't use unknown USB devices`
    },
    {
      id: 'macro-virus',
      title: 'Macro Virus in Documents',
      description: 'You opened a document that contains malicious macros.',
      explanation: `📄 MACRO VIRUSES

- Embedded in Office documents (Word, Excel)
- Use Visual Basic for Applications (VBA)
- Prompt users to "enable content"

⚡ INFECTION FLOW:
1. User opens document and enables macros
2. Macro code executes and installs virus
3. Infects other documents and templates
4. Spreads through shared files

🛡️ DEFENSE:
- Disable macros by default
- Only enable from trusted sources
- Use antivirus with macro scanning
- Keep Office software updated`
    }
  ];

  const scenariosContainer = document.getElementById('scenarios-container');
  const fileSystem = document.getElementById('file-system');
  const protectedScoreEl = document.getElementById('protected-score');
  const infectedScoreEl = document.getElementById('infected-score');
  const fileCountEl = document.getElementById('file-count');
  const infectedCountEl = document.getElementById('infected-count');
  const avStatus = document.getElementById('av-status');
  const avStatusText = document.getElementById('av-status-text');
  const scanAnimation = document.getElementById('scan-animation');
  const warningModal = document.getElementById('warning-modal');
  const warningMessage = document.getElementById('warning-message');
  const warningExplanation = document.getElementById('warning-explanation');
  const successModal = document.getElementById('success-modal');
  const successMessage = document.getElementById('success-message');
  const successExplanation = document.getElementById('success-explanation');
  const computerInterface = document.getElementById('computer-interface');

  let infectedFiles = 0;
  let protectedActions = 0;
  let isAntivirusActive = true;
  let completedScenarios = new Set();

  // Initialize file system
  function initializeFileSystem() {
    fileSystem.innerHTML = '';
    files.forEach(file => {
      const fileElement = document.createElement('div');
      fileElement.className = `file clean`;
      fileElement.innerHTML = `
        <div class="file-icon">${file.icon}</div>
        <div class="file-name">${file.name}</div>
        <div class="file-size">${file.size}</div>
      `;
      fileElement.addEventListener('click', () => openFile(file));
      fileSystem.appendChild(fileElement);
    });
    updateFileCounts();
  }

  // Visual demonstration of virus spread
  function demonstrateVirusSpread() {
    // Clear any existing infections
    files.forEach(file => {
      file.infected = false;
      updateFileDisplay(file.id);
    });
    infectedFiles = 0;
    updateFileCounts();
    
    // Show start message
    showWarning(
      'Virus Spread Demonstration',
      'Watch how a virus attaches to files and spreads through the system...',
      '🔬 DEMONSTRATION STARTING:\n\nThis simulation will show:\n1. Initial file infection\n2. Virus code attachment\n3. Spread to adjacent files\n4. Rapid propagation\n\nWatch the visual effects carefully!'
    );
    
    // Start demonstration after a delay
    setTimeout(() => {
      // Infect first file with visual effects
      const firstFile = files[Math.floor(Math.random() * files.length)];
      showVirusAttachment(firstFile.id);
      
      setTimeout(() => {
        infectFile(firstFile.id);
        showVirusSpread(firstFile.id);
        
        // Continue spreading
        setTimeout(() => {
          spreadInfectionVisual();
        }, 2000);
      }, 1500);
    }, 3000);
  }

  // Show virus attaching to a file
  function showVirusAttachment(fileId) {
    const fileElement = fileSystem.children[fileId - 1];
    if (!fileElement) return;
    
    const rect = fileElement.getBoundingClientRect();
    const containerRect = computerInterface.getBoundingClientRect();
    
    // Create virus particles moving toward the file
    for (let i = 0; i < 8; i++) {
      createVirusParticle(
        Math.random() * containerRect.width,
        Math.random() * containerRect.height,
        rect.left + rect.width/2 - containerRect.left,
        rect.top + rect.height/2 - containerRect.top
      );
    }
    
    // Show infection animation
    const infectionAnim = document.createElement('div');
    infectionAnim.className = 'infection-animation';
    infectionAnim.style.left = (rect.left + rect.width/2 - containerRect.left) + 'px';
    infectionAnim.style.top = (rect.top + rect.height/2 - containerRect.top) + 'px';
    computerInterface.appendChild(infectionAnim);
    
    // Show virus code
    for (let i = 0; i < 5; i++) {
      showVirusCode(rect, containerRect);
    }
    
    // Remove animation after completion
    setTimeout(() => {
      infectionAnim.remove();
    }, 1000);
  }

  // Create moving virus particles
  function createVirusParticle(fromX, fromY, toX, toY) {
    const particle = document.createElement('div');
    particle.className = 'virus-particle';
    particle.style.left = fromX + 'px';
    particle.style.top = fromY + 'px';
    particle.style.setProperty('--tx', (toX - fromX) + 'px');
    particle.style.setProperty('--ty', (toY - fromY) + 'px');
    particle.style.animation = `virusMove 1.5s linear forwards`;
    computerInterface.appendChild(particle);
    
    setTimeout(() => {
      particle.remove();
    }, 1500);
  }

  // Show floating virus code
  function showVirusCode(fileRect, containerRect) {
    const code = document.createElement('div');
    code.className = 'virus-code';
    code.textContent = Math.random() > 0.5 ? 'malware.exe' : 'virus_code';
    code.style.left = (fileRect.left + Math.random() * fileRect.width - containerRect.left) + 'px';
    code.style.top = (fileRect.top + fileRect.height - containerRect.top) + 'px';
    computerInterface.appendChild(code);
    
    setTimeout(() => {
      code.remove();
    }, 3000);
  }

  // Visual virus spread effect
  function showVirusSpread(fromFileId) {
    const fromFile = fileSystem.children[fromFileId - 1];
    if (!fromFile) return;
    
    const fromRect = fromFile.getBoundingClientRect();
    const containerRect = computerInterface.getBoundingClientRect();
    
    // Create particles spreading from infected file
    for (let i = 0; i < 12; i++) {
      const targetFile = files[Math.floor(Math.random() * files.length)];
      if (targetFile.id !== fromFileId && !targetFile.infected) {
        const targetElement = fileSystem.children[targetFile.id - 1];
        const targetRect = targetElement.getBoundingClientRect();
        
        createVirusParticle(
          fromRect.left + fromRect.width/2 - containerRect.left,
          fromRect.top + fromRect.height/2 - containerRect.top,
          targetRect.left + targetRect.width/2 - containerRect.left,
          targetRect.top + targetRect.height/2 - containerRect.top
        );
      }
    }
  }

  // Continue visual spread demonstration
  function spreadInfectionVisual() {
    if (infectedFiles < files.length) {
      const cleanFiles = files.filter(f => !f.infected);
      if (cleanFiles.length > 0) {
        const randomFile = cleanFiles[Math.floor(Math.random() * cleanFiles.length)];
        showVirusAttachment(randomFile.id);
        
        setTimeout(() => {
          infectFile(randomFile.id);
          showVirusSpread(randomFile.id);
          
          if (infectedFiles < files.length - 1) {
            setTimeout(spreadInfectionVisual, 1500);
          } else {
            showWarning(
              'Demonstration Complete',
              'The virus has spread throughout the entire system!',
              '📊 INFECTION SUMMARY:\n\n• Started with 1 infected file\n• Spread to all ' + files.length + ' files\n• Took ' + (files.length * 1.5) + ' seconds\n\n🔍 KEY OBSERVATIONS:\n• Viruses spread exponentially\n• Each infection creates new spread points\n• Rapid propagation can overwhelm systems\n• Early detection is crucial'
            );
          }
        }, 1500);
      }
    }
  }

  // Open file (simulate infection risk)
  function openFile(file) {
    if (file.infected) {
      // File is already infected
      showWarning(
        'Infected File Opened!',
        `The file "${file.name}" is infected with a virus! Opening it has activated the malware.`
      );
      spreadInfection();
    } else if (Math.random() < 0.3 && !isAntivirusActive) {
      // Random chance of infection when antivirus is off
      showVirusAttachment(file.id);
      setTimeout(() => {
        infectFile(file.id);
        showWarning(
          'Virus Activated!',
          `The file "${file.name}" contained a hidden virus that just activated!`
        );
        spreadInfection();
      }, 1000);
    } else {
      // Safe file opening
      protectedActions++;
      protectedScoreEl.textContent = protectedActions;
      protectedScoreEl.classList.add('pulse');
      setTimeout(() => protectedScoreEl.classList.remove('pulse'), 500);
    }
  }

  // Infect a file
  function infectFile(fileId) {
    const file = files.find(f => f.id === fileId);
    if (file && !file.infected) {
      file.infected = true;
      infectedFiles++;
      updateFileDisplay(fileId);
      updateFileCounts();
    }
  }

  // Spread infection to other files
  function spreadInfection() {
    if (infectedFiles > 0) {
      // Randomly infect 1-2 additional files
      const cleanFiles = files.filter(f => !f.infected);
      if (cleanFiles.length > 0) {
        const randomFile = cleanFiles[Math.floor(Math.random() * cleanFiles.length)];
        setTimeout(() => {
          showVirusAttachment(randomFile.id);
          setTimeout(() => {
            infectFile(randomFile.id);
            showWarning(
              'Virus Spreading!',
              `The virus has spread to "${randomFile.name}"! Viruses can rapidly infect multiple files.`
            );
          }, 1000);
        }, 1500);
      }
    }
  }

  // Update file display
  function updateFileDisplay(fileId) {
    const fileElements = fileSystem.querySelectorAll('.file');
    const file = files.find(f => f.id === fileId);
    if (file) {
      const fileElement = fileElements[fileId - 1];
      if (fileElement) {
        fileElement.className = `file ${file.infected ? 'infected' : 'clean'}`;
      }
    }
  }

  // Update file counts
  function updateFileCounts() {
    fileCountEl.textContent = files.length;
    infectedCountEl.textContent = infectedFiles;
    infectedScoreEl.textContent = infectedFiles;
  }

  // Run antivirus scan
  function runAntivirusScan() {
    if (isAntivirusActive) {
      scanAnimation.style.display = 'block';
      setTimeout(() => {
        scanAnimation.style.display = 'none';
        if (infectedFiles > 0) {
          showSuccess(
            'Scan Complete',
            `Antivirus found ${infectedFiles} infected file(s)! Viruses can be detected and removed by security software.`,
            `🛡️ ANTIVIRUS PROTECTION TIPS:

- Keep antivirus software updated
- Schedule regular scans
- Enable real-time protection
- Update virus definitions daily
- Use reputable security software

✅ REMOVAL STEPS:
1. Quarantine infected files
2. Delete or clean infected files
3. Restore from backup if needed
4. Update all software
5. Run full system scan`
          );
        } else {
          showSuccess(
            'Scan Complete',
            'No viruses detected! Your system is clean.',
            '✅ System is protected with active antivirus software.'
          );
        }
      }, 2000);
    } else {
      showWarning(
        'Antivirus Disabled!',
        'Your antivirus software is not active. Enable it for protection.',
        '⚠️ ANTIVIRUS DISABLED WARNING:\n\nRunning without antivirus protection makes your system vulnerable to:\n• Virus infections\n• Malware attacks\n• Data theft\n• System corruption\n\nEnable antivirus immediately!'
      );
    }
  }

  // Quarantine infected files
  function quarantineInfected() {
    if (infectedFiles > 0) {
      files.forEach(file => {
        if (file.infected) {
          file.infected = false;
          updateFileDisplay(file.id);
        }
      });
      infectedFiles = 0;
      updateFileCounts();
      showSuccess(
        'Quarantine Successful',
        'All infected files have been quarantined and cleaned.',
        '✅ QUARANTINE PROCESS:\n\nInfected files are isolated to prevent spread:\n1. Files moved to secure location\n2. Viruses are neutralized\n3. System is cleaned\n4. Threat is eliminated\n\nRegular scanning helps maintain security.'
      );
    } else {
      showSuccess(
        'No Infections',
        'No files need quarantine. Your system is clean.',
        '✅ Good security practices prevent infections.'
      );
    }
  }

  // Show warning modal
  function showWarning(title, message, explanation) {
    warningMessage.textContent = message;
    warningExplanation.textContent = explanation || '';
    warningModal.classList.add('active');
  }

  // Show success modal
  function showSuccess(title, message, explanation) {
    successMessage.textContent = message;
    successExplanation.textContent = explanation || '';
    successModal.classList.add('active');
  }

  // Close modals
  function closeWarningModal() {
    warningModal.classList.remove('active');
  }

  function closeSuccessModal() {
    successModal.classList.remove('active');
  }

  // Toggle antivirus
  function toggleAntivirus() {
    isAntivirusActive = !isAntivirusActive;
    avStatus.className = `status-indicator ${isAntivirusActive ? '' : 'off'}`;
    avStatusText.textContent = isAntivirusActive ? 'Active' : 'Disabled';
    
    if (!isAntivirusActive) {
      showWarning(
        'Antivirus Disabled!',
        'You disabled your antivirus protection. This makes your system vulnerable.',
        '⚠️ SECURITY WARNING:\n\nDisabling antivirus removes critical protection:\n• Real-time threat detection\n• Malware blocking\n• Virus scanning\n• Firewall protection\n\nEnable antivirus immediately for safety.'
      );
    }
  }

  // Initialize the simulation
  function initialize() {
    initializeFileSystem();
    
    // Render scenarios
    scenarios.forEach(scenario => {
      const card = document.createElement('div');
      card.className = 'card';
      if (completedScenarios.has(scenario.id)) {
        card.classList.add('disabled');
        const check = document.createElement('div');
        check.className = 'checkmark';
        check.textContent = '✓';
        card.appendChild(check);
      }
      
      card.innerHTML = `
        <div class="card-icon">🦠</div>
        <h2>${scenario.title}</h2>
        <p>${scenario.description}</p>
        <span class="card-badge">Virus Type</span>
      `;
      
      card.addEventListener('click', () => {
        if (!completedScenarios.has(scenario.id)) {
          showWarning(scenario.title, scenario.description, scenario.explanation);
          completedScenarios.add(scenario.id);
          card.classList.add('disabled');
          const check = document.createElement('div');
          check.className = 'checkmark';
          check.textContent = '✓';
          card.appendChild(check);
        }
      });
      
      scenariosContainer.appendChild(card);
    });
  }

  // Start the simulation
  initialize();

  // Add antivirus toggle to status bar
  const statusBar = document.querySelector('.status-bar');
  const toggleBtn = document.createElement('button');
  toggleBtn.className = 'action-btn';
  toggleBtn.style.background = '#6366f1';
  toggleBtn.textContent = isAntivirusActive ? 'Disable AV' : 'Enable AV';
  toggleBtn.onclick = toggleAntivirus;
  statusBar.appendChild(toggleBtn);
</script>

</body>
</html>